<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Dashboard</title>
    <link
      rel="stylesheet"
      href="./node_modules/bootstrap/dist/css/bootstrap.min.css"
    />
    <script src="./node_modules/angular/angular.min.js"></script>
    <script src="./node_modules/@uirouter/angularjs/release/angular-ui-router.js"></script>
    <script src="./node_modules/sweetalert2/dist/sweetalert2.min.css"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.9.2/html2pdf.bundle.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.3.0/font/bootstrap-icons.css">
    <style>
      body {
        background-color: #9f8ff2;
      }
      .sidebar {
        height: 100%;
        width: 0;
        position: fixed;
        z-index: 1;
        top: 0;
        left: 0;
        overflow-x: hidden;
        transition: 0.5s;
        padding-top: 60px;
      }

      .sidebar a {
        padding: 15px 25px;
        text-decoration: none;
        font-size: 20px;
        color: #818181;
        display: block;
        transition: 0.3s;
      }

      .sidebar a:hover {
        color: #f1f1f1;
      }

      #openSidebarBtn {
        font-size: 30px;
        cursor: pointer;
        position: fixed;
        left: 20px;
        top: 20px;
      }

      #main {
        transition: margin-left 0.5s;
        padding: 16px;
      }
      #image {
        margin-left: 770px;
        margin-top: -480px;
        height: 350px;
      }
    </style>
  </head>
  <body ng-app="myApp" ng-controller="myCtrl">
    <div id="mySidebar" style="background-color: #3b227a" class="sidebar">
      <li ng-repeat="panel in panels">
        <a href="" style="color: white" ng-click="handleHeadingClick(panel.id)"
          > <i style="color: white; height: 15px;" class=" {{panel.icon}}"></i> {{panel.heading}}</a
        >
        
      </li>
      <button style="background-color: #3b227a; color: white; margin-left: 23px;" class="btn btn-primary" ng-click="logout()">Logout</button>
    </div>

    <div id="main">
      <span id="openSidebarBtn" style="color: #3b227a" ng-click="openSidebar()"
        >&#9776;</span
      >
      <h1
        style="
          text-align: center;
          margin-top: 20px;
          font-size: 50px;
          color: #3b227a;
        "
      >
        {{pageTitle}}
      </h1>
      <div
        ng-show="showDashboardContent"
        style="
          background-color: white;
          height: 450px;
          border-radius: 25px;
          width: 1150px;
          margin-left: 60px;
        "
      >
        <div ng-repeat="user in users" style="margin-top: 60px">
          <h1
            style="
              margin-left: 50px;
              margin-top: 90px;
              font-size: 50px;
              color: #3b227a;
            "
          >
            Welcome , {{ user.firstname }} {{ user.lastname }}
          </h1>
          <br />
          <div style="display: flex">
            <div style="margin-left: 50px">
              <label style="font-size: 30px; color: #3b227a">FirstName:</label
              ><input
                type="text"
                style="width: 300px; color: #3b227a"
                class="form-control"
                value="{{user.firstname}}"
                placeholder="Enter Firstname"
              /><br /><br />
              <label style="font-size: 30px; color: #3b227a">LastName:</label
              ><input
                type="text"
                style="width: 300px; color: #3b227a"
                class="form-control"
                value="{{user.lastname}}"
                placeholder="Enter LastName"
              /><br /><br />
              <label style="font-size: 30px; color: #3b227a">Age:</label
              ><input
                type="text"
                style="width: 300px; color: #3b227a"
                class="form-control"
                value="{{user.age}}"
                placeholder="Enter LastName"
              /><br />
            </div>
            <div style="margin-left: 60px">
              <label style="font-size: 30px; color: #3b227a">Username:</label
              ><input
                type="text"
                style="width: 300px; color: #3b227a"
                class="form-control"
                value="{{user.username}}"
                placeholder="Enter Firstname"
              /><br /><br />
              <label style="font-size: 30px; color: #3b227a">Gender:</label
              ><input
                type="text"
                style="width: 300px; color: #3b227a"
                class="form-control"
                value="{{user.gender}}"
                placeholder="Enter LastName"
              /><br /><br />
            </div>
          </div>
        </div>
        <image
          id="image"
          src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTvheW4I5N_Hix_lvmDwJBsYFazjiaSu5q9zxCQ3ewyobcs_4nHWwiS4JU6Z_u0CPWV8jQ&usqp=CAU"
        ></image>
      </div>
    </div>
    <div
      ng-show="showAppointmentsContent"
      style="
        background-color: white;
        height: 500px;
        width: 1050px;
        margin-left: 130px;
        border-radius: 25px;
      "
    >
      <br />
      <div style="display: flex; margin-top: 80px">
        <div class="form-group" style="margin-left: 100px">
          <h3 style="color: #3b227a; font-size: 30px">Medical Issue</h3>
          <input
            type="text"
            style="color: #3b227a"
            class="form-control"
            id="exampleInputmedicalissue"
            ng-model="medicalIssue"
            placeholder="Medical Issue"
          />
        </div>
        <div class="form-group" style="margin-left: 100px">
          <h3 style="color: #3b227a; font-size: 30px">Medical History</h3>
          <input
            type="text"
            style="color: #3b227a"
            class="form-control"
            id="exampleInputmedicalhistory"
            ng-model="medicalHistory"
            placeholder="Medical history"
          />
        </div>
        <div class="form-group" style="margin-left: 100px">
          <h3 style="color: #3b227a; font-size: 30px">Date</h3>
          <input
            style="color: #3b227a"
            placeholder="Year-Month-Date"
            class="form-control"
            id="exampleInputdate"
            ng-model="date"
            placeholder="Date"
          />
        </div>
      </div>

      <div style="display: flex; margin-top: 50px">
        <div style="margin-left: 100px">
          <h3 style="color: #3b227a; font-size: 30px">Time</h3>
          <select
            style="color: #3b227a"
            ng-model="selectedTime"
            ng-options="time.time for time in Times"
          >
            <option style="color: #3b227a" value="">
              Select an Appointment Time
            </option>
          </select>
        </div>

        <div style="margin-left: 100px; margin-top: 20px; display: flex">
          <div>
            <h3 style="color: #3b227a; font-size: 25px">Select Department</h3>
            <select
              style="color: #3b227a"
              id="departmentDropdown"
              ng-model="selectedDepartment"
              ng-options="department.department for department in departments"
              ng-change="getDoctors()"
            >
              <option value="">Select Department</option>
            </select>
          </div>
          <div style="margin-left: 100px">
            <h3 style="color: #3b227a; font-size: 25px">Select Doctor</h3>
            <select
              style="color: #3b227a"
              id="doctorDropdown"
              ng-model="selectedDoctor"
            >
              <option value="">Select Doctor</option>
              <option ng-repeat="doctor in doctors" value="{{ doctor.id }}">
                {{ doctor.firstname }}
              </option>
            </select>
          </div>
        </div>
      </div>

      <button
        type="button"
        class="btn btn-secondary"
        style="margin-left: 430px; margin-top: 80px; background-color: #3b227a"
        ng-click="bookAppointment()"
      >
        Book My Appointment
      </button>
    </div>
    <div ng-show="showPrescriptionsContent">
      <div >
        <div
        id="makepdf"
          style="
            border: 5px solid #3b227a;
            height: 500px;
            width: 600px;
            margin-left: 350px;
            margin-top: -20px;
            background-color: white;
          "
        >
          <div>
            <image
              style="height: 100px; width: 150px; margin-left: 220px"
              src="https://seeklogo.com/images/D/doctor-medical-mk-logo-A197A7A78F-seeklogo.com.png"
            ></image>
          </div>
          <div style="background-color: #3b227a">
            <table class="table" style="background-color: #3b227a">
              <thead style="background-color: #3b227a">
                <tr>
                  <th style="color: #3b227a">Appointment:</th>
                  <th style="color: #3b227a">Medicine:</th>
                  <th style="color: #3b227a">Dose:</th>
                  <th style="color: #3b227a">Instruction:</th>
                </tr>
              </thead>
              <tbody>
                <tr ng-repeat="user in users">
                  <td style="color: #3b227a">{{ user.appointment }}</td>
                  <td style="color: #3b227a">{{ user.medicine_name }}</td>
                  <td style="color: #3b227a">{{ user.dosage}}</td>
                  <td style="color: #3b227a">{{ user.instruction }}</td>
                </tr>
              </tbody>
            </table>
            <div style="margin-top: 200px"><b></b></div>
          </div>
        </div>
      </div>
      <button
        id="button"
        style="margin-left: 590px; margin-top: 10px; background-color: #3b227a"
        type="button"
        ng-click="download()"
        class="btn btn-dark"
      >
        Downlaod
      </button>
    </div>

    <div ng-show="showPaymentContent">
      <div id="makepdf" >
        <div style="margin-left: 90px; margin-right: 90px">
          <table class="table" style="border: 3px solid #3b227a;">
            <thead>
              <tr>
                <th style="color: #3b227a">Appointment:</th>
                <th style="color: #3b227a">Date:</th>
                <th style="color: #3b227a">FirstName:</th>
                <th style="color: #3b227a">Medical Issue:</th>
                <th style="color: #3b227a">Action:</th>
              </tr>
            </thead>
            <tbody>
              <tr ng-repeat="item in users">
                <td style="color: #3b227a">{{ item.id }}</td>
                <td style="color: #3b227a">{{ item.registerdate }}</td>
                <td style="color: #3b227a">{{ item.firstname}}</td>
                <td style="color: #3b227a">{{ item.medical }}</td>
                <td>
                  <button
                    class="btn btn-dark"
                    ng-if="item.paystatus"
                    ng-click="billAction(item)"
                    onclick="document.getElementById('id01').style.display='block'"
                    style="background-color: #3b227a"
                  >
                    Bill
                  </button>
                  <div id="id01" class="w3-modal">
                    <div class="w3-modal-content">
                      <div class="w3-container">
                        <object
                          ng-if="pdfs"
                          data="{{pdfs}}"
                          type="application/pdf"
                          width="100%"
                          height="500px"
                        ></object>
                      </div>
                    </div>
                  </div>
                  <button
                    class="btn btn-dark"
                    ng-if="!item.paystatus"
                    ng-click="paymentAction(item)"
                    style="background-color: #3b227a"
                  >
                    Payment
                  </button>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>
    <div ng-show="showRecordsContent">
      <div style="margin-left: 90px; margin-right: 90px">
         <table class="table" style="border: 3px solid #3b227a;">
          <thead>
            <tr>
              <th style="color: #3b227a">Id</th>
              <th style="color: #3b227a">FirstName</th>
              <th style="color: #3b227a">LastName</th>
              <th style="color: #3b227a">Date</th>
            </tr>
          </thead>
          <tbody>
            <tr ng-repeat="record in records">
              <td style="color: #3b227a">{{record.id}}</td>
              <td style="color: #3b227a">{{record.firstname}}</td>
              <td style="color: #3b227a">{{record.lastname}}</td>
              <td style="color: #3b227a">{{record.registerdate}}</td>
            </tr>
          </tbody>
         </table>
      </div>
    </div>
  </body>
</html>
